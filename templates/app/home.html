{% extends 'base.html' %}
{% load humanize %}

{% block title %}
  - Your Articles
{% endblock %}

{% block base_content %}
  <main class="max-w-7xl px-4 sm:px-6 lg:px-8 mt-10 p-2 md:p-4 lg:p-6">
    <h1 class="title mb-4">Welcome</h1>

    <p class="text-xl mb-4">You have created {{ user.article_count|intcomma }} article{{ user.article.count|pluralize }}
      and written {{ user.written_words|intcomma }} word{{ user.written_words|pluralize }}</p>

    <a href="{% url 'app.create_article' %}" class="button primary w-full sm:w-auto text-center inline-block mb-6">Start New Article</a>

    <h2 class="subtitle mb-6">Your latest article</h2>
    <ul>
      {% if articles %}
        {% for article in articles %}
          <li>
            <a href="{% url 'app.detail_article' article.id %}" class="text-2xl flex items-center">
              {{ article.title }}
              <span class="text-xs rounded-sm uppercase article-status-{{ article.status }} px-4 py-0.5 ml-2">{{ article.status }}</span>
            </a>
            <p class="text-sm">with {{ article.word_count }} word{{ article.word_count|pluralize }}.</p>
          </li>
        {% endfor %}

        {% if is_paginated %}
          <div class="mt-10 flex gap-2 items-center text-xl justify-center">
            {% if page_obj.has_previous %}
              <a href="?page={{ page_obj.previous_page_number }}" class="mx-2"><i data-lucide="chevron-left" class="h-7 w-7 border border-black rounded-md p-1"></i></a>
            {% endif %}
            <span>Page {{ page_obj.number }} of {{ paginator.num_pages }}</span>
            {% if page_obj.has_next %}
              <a href="?page={{ page_obj.next_page_number }}" class="mx-2"><i data-lucide="chevron-right" class="h-7 w-7 border border-black rounded-md p-1"></i></a>
            {% endif %}
          </div>
        {% endif %}
      {% else %}
        <p>You have no articles yet.</p>
      {% endif %}
    </ul>
  </main>
{% endblock %}
